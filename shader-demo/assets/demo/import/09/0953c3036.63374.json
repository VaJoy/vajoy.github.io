[1,["6b2T5vIfZJJoFXKpXrRJxO@6c48a","cc/CQRVFhEx7bXvDoR0XuI"],["vfxTexture","_effectAsset"],[["cc.Material",["_name","_states","_defines","_props"],0,12],["cc.EffectAsset",["_name","shaders","techniques"],0]],[[0,0,1,2,3,4],[1,0,1,2,4]],[[[[0,"vfx-frames-distortion",[{"rasterizerState":{},"depthStencilState":{},"blendState":{"targets":[{}]}}],[{}],[[[{},"cells",8,[0,3,6],"vfxTexture",6,0]],11]]],0,0,[0,0],[0,1],[0,1]],[[[1,"../demo/16-uv-distortion/vfx-frames-distortion",[{"hash":2381307243,"name":"../demo/16-uv-distortion/vfx-frames-distortion|vs|fs:frag","blocks":[{"name":"UBO","stageFlags":16,"binding":0,"members":[{"name":"cells","type":14,"count":1},{"name":"fps","type":13,"count":1},{"name":"strength","type":13,"count":1},{"name":"time","type":13,"count":1}],"defines":[]}],"samplerTextures":[{"name":"vfxTexture","type":28,"count":1,"stageFlags":16,"sampleType":0,"binding":2,"defines":[]}],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[],"attributes":[{"name":"a_position","format":32,"location":0,"defines":[]},{"name":"a_texCoord","format":21,"location":1,"defines":[]}],"fragColors":[{"name":"cc_FragColor","typename":"vec4","type":16,"count":1,"stageFlags":16,"location":0,"defines":[]}],"descriptors":[{"rate":0,"blocks":[],"samplerTextures":[],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[]},{"rate":1,"blocks":[{"name":"UBO","stageFlags":16,"binding":0,"members":[{"name":"cells","type":14,"count":1},{"name":"fps","type":13,"count":1},{"name":"strength","type":13,"count":1},{"name":"time","type":13,"count":1}],"defines":[]}],"samplerTextures":[{"name":"vfxTexture","type":28,"count":1,"stageFlags":16,"sampleType":0,"binding":2,"defines":[]}],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[]},{"rate":2,"blocks":[],"samplerTextures":[],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[]},{"rate":3,"blocks":[],"samplerTextures":[{"name":"inputTexture","type":28,"count":1,"stageFlags":16,"sampleType":0,"binding":1,"defines":[]}],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[]}],"glsl3":{"vert":"\nprecision highp float;\nin vec3 a_position;\nin vec2 a_texCoord;\nout vec2 uv;\nvoid main () {\n  vec4 pos = vec4(a_position, 1.0);\n  gl_Position = pos;\n  uv = a_texCoord;\n}","frag":"\nprecision highp float;\nin vec2 uv;\nlayout(std140) uniform UBO {\n  vec2 cells;\n  float fps;\n  float strength;\n  float time;\n};\nuniform sampler2D inputTexture;\nuniform sampler2D vfxTexture;\nvec4 frag () {\n  float row = cells.x;\n  float col = cells.y;\n  float index = floor(time * fps);\n  vec2 animUV = uv / cells.yx + vec2(mod(index, col) / col, floor(index / col) / row);\n  vec4 vfxColor = texture(vfxTexture, animUV);\n  float gray = vfxColor.r * 0.299 + vfxColor.g * 0.587 + vfxColor.b * 0.114;\n  vec2 offset = (vfxColor.rg - 0.5) * 2.0 * strength * gray;\n  return texture(inputTexture, uv + offset) + vfxColor * 0.4;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},"glsl1":{"vert":"\nprecision highp float;\nattribute vec3 a_position;\nattribute vec2 a_texCoord;\nvarying vec2 uv;\nvoid main () {\n  vec4 pos = vec4(a_position, 1.0);\n  gl_Position = pos;\n  uv = a_texCoord;\n}","frag":"\nprecision highp float;\nvarying vec2 uv;\n   uniform vec2 cells;\n   uniform float fps;\n   uniform float strength;\n   uniform float time;\nuniform sampler2D inputTexture;\nuniform sampler2D vfxTexture;\nvec4 frag () {\n  float row = cells.x;\n  float col = cells.y;\n  float index = floor(time * fps);\n  vec2 animUV = uv / cells.yx + vec2(mod(index, col) / col, floor(index / col) / row);\n  vec4 vfxColor = texture2D(vfxTexture, animUV);\n  float gray = vfxColor.r * 0.299 + vfxColor.g * 0.587 + vfxColor.b * 0.114;\n  vec2 offset = (vfxColor.rg - 0.5) * 2.0 * strength * gray;\n  return texture2D(inputTexture, uv + offset) + vfxColor * 0.4;\n}\nvoid main() { gl_FragColor = frag(); }"},"builtins":{"globals":{"blocks":[],"samplerTextures":[],"buffers":[],"images":[]},"locals":{"blocks":[],"samplerTextures":[],"buffers":[],"images":[]},"statistics":{"CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS":0,"CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS":4}},"defines":[]}],[{"name":"vfx-frames-distortion","passes":[{"pass":"post-process","program":"../demo/16-uv-distortion/vfx-frames-distortion|vs|fs:frag","blendState":{"targets":[{"blend":true,"blendSrc":2,"blendDst":4}]},"depthStencilState":{"depthTest":false,"depthWrite":false},"properties":{"vfxTexture":{"value":"black","type":28},"strength":{"type":13,"value":[0.05]},"cells":{"type":14,"value":[6,3]},"fps":{"type":13,"value":[30]},"time":{"type":13,"value":[0]}}}]}]]],0,0,[],[],[]]]]
