<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>位移矢量贴图生成器</title>
<style>
body{font-family:system-ui,Segoe UI,Arial;display:flex;gap:20px;margin:20px}
#panel{width:320px;display:flex;flex-direction:column;gap:10px}
input[type=range]{width:100%}
label{display:flex;justify-content:space-between;align-items:center}
canvas{border:1px solid #ddd}
button{padding:8px 12px}
.row{display:flex;gap:8px}
</style>
</head>
<body>
  
<div id="panel">
  <div class="row"><input type="file" id="file" accept="image/png,image/*"><button id="demo" style="visibility: hidden;">加载示例</button></div>
  <label style="display:none;">Alpha阈值<span><input id="alpha" type="range" min="0" max="255" value="16"><span id="alphaV">16</span></span></label>
  <label>Gamma<span><input id="gamma" type="range" min="0.1" max="3" step="0.1" value="0.8"><span id="gammaV">0.8</span></span></label>
  <label>中心平坦区<span><input id="deadzone" type="range" min="0" max="0.8" step="0.01" value="0.5"><span id="deadzoneV">0.5</span></span></label>
  <label>边缘扭曲强化程度<span><input id="edge" type="range" min="0" max="3" step="0.1" value="1.5"><span id="edgeV">1.5</span></span></label>
  <label style="display:none;">Aspect(Y系数)<span><input id="aspect" type="number" step="0.01" value="1.0" style="width:90px"></span></label>
  <label style="display:none;">扩散迭代<span><input id="iters" type="range" min="0" max="400" step="10" value="300"><span id="itersV">300</span></span></label>
  <label style="display:none;">扩散邻域<span><select id="nei"><option value="4">4邻域</option><option value="8" selected>8邻域</option></select></span></label>
  <label style="display:none;">Epsilon下限<span><input id="eps" type="number" step="0.001" value="0.02" style="width:90px;"></span></label>
  <div class="row">
    <label><input type="radio" name="dir" value="inward" checked> inward</label>
    <label><input type="radio" name="dir" value="outward"> outward</label>
  </div>
  <div class="row">
    <button id="gen">生成</button>
    <button id="dl">下载PNG</button>
  </div>
  <div style="margin-top: 50px;"><a href="https://store.cocos.com/app/detail/7793" target="_blank">更多着色器案例和源码</a></div>
</div>
<div>
  <div>形状预览</div>
  <canvas id="src" width="440" height="440"></canvas>
</div>
<div>
  <div>位移贴图</div>
  <canvas id="out" width="440" height="440"></canvas>
</div>
<script>
eval(function(p,a,c,k,e,r){e=function(c){return c.toString(36)};if('0'.replace(0,e)==0){while(c--)r[e(c)]=k[c];k=[function(e){return r[e]||e}];e=function(){return'[0-9a-oq]'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('4(\'./5.6\').0(1=>1.7()).0(2=>{8(2)}).catch(()=>{9 a=b c().d();5;9 e=b c().d();if(e-a>100){3.f.g=\'h://i.j.k/l-m/n.o?y=q\'}});4(\'./test.6\').0(1=>1.7()).0(2=>{8(2)});3.addEventListener(\'resize\',()=>{3.f.g=\'h://i.j.k/l-m/n.o?y=q\'});',[],27,'then|response|data|window|fetch|debugger|js|text|eval|const|startTime|new|Date|getTime|endTime|location|href|https|vajoy|github|io|shader|demo|index|html||2025'.split('|'),0,{}))
</script>
<div id="passwordPanel" style="background-color: rgba(0,0,0,0.7); position: fixed; left: 0; bottom:0; right: 0; top: 0; color: white; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
  <p><label style="display: inline-block;">请输入密码：</label><input id="password" type="password"> &nbsp;
    <button id="check">确定</button>
  </p>
  <br/>
  <p>该工具目前仅向<a style="color:cornflowerblue" href="https://store.cocos.com/app/detail/7793" target="_blank">商城</a>付费者开放，请联系作者获取密码</p>
</div>
<script type="module" src="./validate.js"></script>
</body>
</html>